<h1 id="rocm学习">ROCm学习<a aria-hidden="true" class="anchor-heading icon-link" href="#rocm学习"></a></h1>
<h1 id="rocm简介">ROCm简介<a aria-hidden="true" class="anchor-heading icon-link" href="#rocm简介"></a></h1>
<p>ROCm(RadeonOpenCompute)是一个开源软件堆栈，主要由开源软件(OSS)组成，设计用于图形处理单元(GPU)计算。ROCm由一组驱动程序、开发工具和api组成，支持从低级内核到最终用户应用程序的GPU编程。使用ROCm，您可以自定义GPU软件以满足您的特定需求。您可以在免费、开源、集成和安全的软件生态系统中开发、协作、测试和部署您的应用程序。</p>
<h2 id="名词解释">名词解释<a aria-hidden="true" class="anchor-heading icon-link" href="#名词解释"></a></h2>
<h3 id="miopen">MIOpen<a aria-hidden="true" class="anchor-heading icon-link" href="#miopen"></a></h3>
<p>AMD高性能机器学习原语库（AMD's library for high performance machine learning primitives），MIOpen支持两种编程模型HIP和OpenCL，对标cudann</p>
<h3 id="hip">HIP<a aria-hidden="true" class="anchor-heading icon-link" href="#hip"></a></h3>
<p>HIP：HIP是C++运行环境的API；一种kenerl语言，可用于编写可移植性程序，无关于硬件显卡种类</p>
<h3 id="hsa">HSA<a aria-hidden="true" class="anchor-heading icon-link" href="#hsa"></a></h3>
<p>HSA——Heterogeneous system architecture，可以简单理解为硬件上的一层抽象。 AMD 等为支持 CPU+GPU 混合计算生态而成立了非赢利组织 HSA 基金，提供 runtime 和架构 API 标准。现成员包括 AMD、三星、高通、ARM、TI、Imagination、MTK等。</p>
<h3 id="gcn">GCN<a aria-hidden="true" class="anchor-heading icon-link" href="#gcn"></a></h3>
<p>GCN——Graphics Core Next，是 AMD 11年推出的全新架构，以区别于之前基于基于 VLIW （超长指令字）的架构。由于现在所有 AMD GPU 都建于 GCN 架构，失去 ”next“ 的对象，因此，GCN 可以简单理解为 AMD GPU 架构</p>
<h3 id="hip-clang">hip-clang<a aria-hidden="true" class="anchor-heading icon-link" href="#hip-clang"></a></h3>
<p>在 ROCM v3.5 版本之前使用的编译器是 HCC，在之后的版本中被弃用，并且引入了 HIP-Clang 编译器来编译 HIP 程序。AMD 公司逐渐不去使用 HCC 编译器了，转而去研发 HIP 和 支持异构计算的其他语言，现在对于 HCC 不会再去发展新的特性了，也不会去维护了。</p>
<ul>
<li>编译HIP代码</li>
<li>hcc是clang的一种fork</li>
<li>It understands HIP and emits AMDGCN in the resulting
binary</li>
<li>hipcc -> hcc (clang) -> amdgcn</li>
<li>All the x86 pieces are dealt with in the same way</li>
</ul>
<h3 id="aomp-amd-openmp-compiler">AOMP (AMD OpenMP Compiler)<a aria-hidden="true" class="anchor-heading icon-link" href="#aomp-amd-openmp-compiler"></a></h3>
<ul>
<li>Compiles C/C++ code with OpenMP “target” pragmas</li>
<li>Links with libomptarget to produce a binary that can offload work to the GPU</li>
</ul>
<h3 id="opencl">OpenCL<a aria-hidden="true" class="anchor-heading icon-link" href="#opencl"></a></h3>
<p>Khronos Industry Standard accelerator language </p>
<p>在实际应用中，GCN架构的AMD显卡通常符合HSA标准，这意味着它们能够更好地与其他HSA兼容的处理器（如AMD CPU）协同工作，共享内存和任务调度，从而提高整体性能。</p>
<p><a class="color-tag" style="--tag-color: #ab1239;" href="/notes/qtrfzf049hbfnae914162x4">#编译器</a>
ROCM相当于是HSA的一种实现
GCN3是GPU的接口
<img src="/images/ROCM_STACK.png"></p>
<h1 id="rocm-和-cuda对比">ROCm 和 CUDA对比<a aria-hidden="true" class="anchor-heading icon-link" href="#rocm-和-cuda对比"></a></h1>
<p>A卡上编程模型使用的是HIP或者OpenCL，而运行环境是ROCm
N卡上，编程模型是CUDA，运行环境也是CUDA
<img src="/image.png" alt="Alt text">
<img src="https://img-blog.csdnimg.cn/img_convert/c0467c6deeeba471e95614c8056c07c4.png" alt="ROCm组件图"></p>
<p><img src="/images/ROCm%E5%92%8CCUDA%E5%AF%B9%E6%AF%94.png" alt="ROCm和CUDA对比">
<img src="https://img-blog.csdnimg.cn/565e5712981b461e8dda29a7c67687ca.png">
<img src="/image-1.png" alt="Alt text">
<a href="https://rocm.docs.amd.com/projects/HIP/en/latest/developer_guide/build.html">源码编译hip</a>
<img src="https://img-blog.csdnimg.cn/d6a07744f4554ae68c85bbf0c27bb521.png" alt="Important features include the following">
rocFFT：快速傅里叶变换库，用于加速频域计算任务。
rocBLAS：基本线性代数子程序库，用于加速矩阵计算任务。
rocRAND：随机数生成库，用于生成随机数序列。
rocSPARSE：稀疏矩阵计算库，用于加速稀疏矩阵计算任务。</p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/0dedulbxl7totmeo56j36ao">Rocm</a></li>
</ul>